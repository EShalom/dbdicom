

<!DOCTYPE html>


<html lang="en" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>dbdicom.create &#8212; dbdicom 1.0 documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../../_static/styles/bootstrap.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=e353d410970836974a52" rel="stylesheet" />

  
  <link href="../../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=e353d410970836974a52" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/bootstrap.js?digest=e353d410970836974a52" />
<link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52" />

    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/sphinx_highlight.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script src="../../_static/design-tabs.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = '_modules/dbdicom/create';</script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
<div class="bd-header__inner bd-page-width">
  <label class="sidebar-toggle primary-toggle" for="__primary">
    <span class="fa-solid fa-bars"></span>
  </label>
  
  <div class="navbar-header-items__start">
    
      <div class="navbar-item">
  

<a class="navbar-brand logo" href="../../index.html">
  
  
  
  
    
    
      
    
    
    <img src="../../_static/dbd.png" class="logo__image only-light" alt="Logo image"/>
    <script>document.write(`<img src="../../_static/dbd.png" class="logo__image only-dark" alt="Logo image"/>`);</script>
  
  
</a></div>
    
  </div>
  
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item"><nav class="navbar-nav">
  <p class="sidebar-header-items__title"
     role="heading"
     aria-level="1"
     aria-label="Site Navigation">
    Site Navigation
  </p>
  <ul class="bd-navbar-elements navbar-nav">
    
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../user_guide/index.html">
                        User guide
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../reference/index.html">
                        Reference
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../tutorials/index.html">
                        Tutorials
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../developers_guide/index.html">
                        Developer guide
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../about/index.html">
                        About
                      </a>
                    </li>
                
  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          
<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
        </div>
      
      
        <div class="navbar-item">
<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links navbar-nav"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/QIB-Sheffield/dbdicom" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-square-github"></i></span>
            <label class="sr-only">GitHub</label></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">
<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
    </div>
  

  
</div>

    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar hide-on-wide">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          <div class="navbar-item"><nav class="navbar-nav">
  <p class="sidebar-header-items__title"
     role="heading"
     aria-level="1"
     aria-label="Site Navigation">
    Site Navigation
  </p>
  <ul class="bd-navbar-elements navbar-nav">
    
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../user_guide/index.html">
                        User guide
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../reference/index.html">
                        Reference
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../tutorials/index.html">
                        Tutorials
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../developers_guide/index.html">
                        Developer guide
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../about/index.html">
                        About
                      </a>
                    </li>
                
  </ul>
</nav></div>
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">
<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links navbar-nav"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/QIB-Sheffield/dbdicom" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-square-github"></i></span>
            <label class="sr-only">GitHub</label></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">



<nav aria-label="Breadcrumbs">
  <ul class="bd-breadcrumbs" role="navigation" aria-label="Breadcrumb">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="../index.html" class="nav-link">Module code</a></li>
    
    <li class="breadcrumb-item active" aria-current="page">dbdicom.create</li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <h1>Source code for dbdicom.create</h1><div class="highlight"><pre>
<span></span><span class="c1"># Importing annotations to handle or sign in import type hints</span>
<span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">annotations</span>

<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">dbdicom.manager</span> <span class="kn">import</span> <span class="n">Manager</span>
<span class="kn">from</span> <span class="nn">dbdicom.types.database</span> <span class="kn">import</span> <span class="n">Database</span>
<span class="kn">from</span> <span class="nn">dbdicom.types.patient</span> <span class="kn">import</span> <span class="n">Patient</span>
<span class="kn">from</span> <span class="nn">dbdicom.types.study</span> <span class="kn">import</span> <span class="n">Study</span>
<span class="kn">from</span> <span class="nn">dbdicom.types.series</span> <span class="kn">import</span> <span class="n">Series</span>
<span class="kn">from</span> <span class="nn">dbdicom.types.instance</span> <span class="kn">import</span> <span class="n">Instance</span>


<span class="k">def</span> <span class="nf">create</span><span class="p">(</span><span class="n">manager</span><span class="p">,</span> <span class="n">uid</span><span class="o">=</span><span class="s1">&#39;Database&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>

    <span class="k">if</span> <span class="n">uid</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span>
    <span class="k">if</span> <span class="n">uid</span> <span class="o">==</span> <span class="s1">&#39;Database&#39;</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">Database</span><span class="p">(</span><span class="n">create</span><span class="p">,</span> <span class="n">manager</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="c1"># This case is included for convenience but should be avoided </span>
    <span class="c1"># at all costs because the lookup of type at creation is very expensive.</span>
    <span class="c1"># Considering removing and make type a requirement</span>
    <span class="k">if</span> <span class="nb">type</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="nb">type</span> <span class="o">=</span> <span class="n">manager</span><span class="o">.</span><span class="n">type</span><span class="p">(</span><span class="n">uid</span><span class="p">)</span>

    <span class="k">if</span> <span class="nb">type</span> <span class="o">==</span> <span class="s1">&#39;Patient&#39;</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">Patient</span><span class="p">(</span><span class="n">create</span><span class="p">,</span> <span class="n">manager</span><span class="p">,</span> <span class="n">uid</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="n">key</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">type</span> <span class="o">==</span> <span class="s1">&#39;Study&#39;</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">Study</span><span class="p">(</span><span class="n">create</span><span class="p">,</span> <span class="n">manager</span><span class="p">,</span> <span class="n">uid</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="n">key</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">type</span> <span class="o">==</span> <span class="s1">&#39;Series&#39;</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">Series</span><span class="p">(</span><span class="n">create</span><span class="p">,</span> <span class="n">manager</span><span class="p">,</span> <span class="n">uid</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="n">key</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">type</span> <span class="o">==</span> <span class="s1">&#39;Instance&#39;</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">Instance</span><span class="p">(</span><span class="n">create</span><span class="p">,</span> <span class="n">manager</span><span class="p">,</span> <span class="n">uid</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="n">key</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>


<div class="viewcode-block" id="database"><a class="viewcode-back" href="../../reference/generated/dbdicom.database.html#dbdicom.database">[docs]</a><span class="k">def</span> <span class="nf">database</span><span class="p">(</span><span class="n">path</span><span class="p">:</span><span class="nb">str</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Database</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;create a new database in memory or open an existing one on disk.</span>

<span class="sd">    Args:</span>
<span class="sd">        path (str, optional): path to an existing database. In case none is provided, this will create a new empty database.</span>
<span class="sd">        kwargs: any valid DICOM (tag, value) pair can be provided as keyword argument. These attributes will be assigned to the database and inherited by all DICOM objects later saved in the database.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Database: Instance of the Database class.</span>

<span class="sd">    Note:</span>
<span class="sd">        If no path is provided, a new database is created in memory. Any changes or additions to that database will only exist in memory until the new database is saved with .save().</span>

<span class="sd">    See Also:</span>
<span class="sd">        :func:`~patient`</span>
<span class="sd">        :func:`~study`</span>
<span class="sd">        :func:`~series`</span>
<span class="sd">    </span>
<span class="sd">    Example:</span>

<span class="sd">        Create a new database in memory and print the contents:</span>

<span class="sd">        &gt;&gt;&gt; database = db.database()</span>
<span class="sd">        &gt;&gt;&gt; database.print()</span>
<span class="sd">        ---------- DATABASE --------------</span>
<span class="sd">        Location:  In memory</span>
<span class="sd">        ----------------------------------</span>

<span class="sd">        Open an existing DICOM database and check the contents (in this example we are using an edited version of a RIDER dataset case):</span>

<span class="sd">        &gt;&gt;&gt; database = db.database(&#39;path\\to\\RIDER\\case&#39;)</span>
<span class="sd">        &gt;&gt;&gt; database.print()</span>
<span class="sd">        ---------- DATABASE --------------</span>
<span class="sd">        Location:  path\to\DICOM\database</span>
<span class="sd">            Study BRAIN^RESEARCH [19040321]</span>
<span class="sd">                Series 014 [sag 3d gre +c]</span>
<span class="sd">                    Nr of instances: 176</span>
<span class="sd">            Study BRAIN^RESEARCH [19040321]</span>
<span class="sd">                Series 017 [sag 3d flair +c]</span>
<span class="sd">                    Nr of instances: 210</span>
<span class="sd">            Study BRAIN^RESEARCH [19040321]</span>
<span class="sd">                Series 005 [ax tensor]</span>
<span class="sd">                    Nr of instances: 468</span>
<span class="sd">                Series 006 [ax 5 flip]</span>
<span class="sd">                    Nr of instances: 16</span>
<span class="sd">                Series 007 [ax 10 flip]</span>
<span class="sd">                    Nr of instances: 16</span>
<span class="sd">                Series 008 [ax 15 flip]</span>
<span class="sd">                    Nr of instances: 16</span>
<span class="sd">                Series 009 [ax 20 flip]</span>
<span class="sd">                    Nr of instances: 16</span>
<span class="sd">                Series 010 [ax 25 flip]</span>
<span class="sd">                    Nr of instances: 16</span>
<span class="sd">                Series 011 [ax 30 flip]</span>
<span class="sd">                    Nr of instances: 16</span>
<span class="sd">                Series 012 [perfusion]</span>
<span class="sd">                    Nr of instances: 1040</span>
<span class="sd">            Study BRAIN^RESEARCH [19040323]</span>
<span class="sd">                Series 017 [sag 3d flair +c]</span>
<span class="sd">                    Nr of instances: 160</span>
<span class="sd">                Series 018 [sag 3d flair +c_Copy]</span>
<span class="sd">                    Nr of instances: 160</span>
<span class="sd">                Series 019 [MergedSeries]</span>
<span class="sd">                    Nr of instances: 320</span>
<span class="sd">            Study BRAIN^RESEARCH [19040323]</span>
<span class="sd">                Series 005 [ax tensor]</span>
<span class="sd">                    Nr of instances: 468</span>
<span class="sd">                Series 006 [ax 5 flip]</span>
<span class="sd">                    Nr of instances: 16</span>
<span class="sd">                Series 007 [ax 10 flip]</span>
<span class="sd">                    Nr of instances: 16</span>
<span class="sd">                Series 008 [ax 15 flip]</span>
<span class="sd">                    Nr of instances: 16</span>
<span class="sd">                Series 009 [ax 20 flip]</span>
<span class="sd">                    Nr of instances: 16</span>
<span class="sd">                Series 010 [ax 25 flip]</span>
<span class="sd">                    Nr of instances: 16</span>
<span class="sd">                Series 011 [ax 30 flip]</span>
<span class="sd">                    Nr of instances: 16</span>
<span class="sd">                Series 012 [perfusion]</span>
<span class="sd">                    Nr of instances: 1040</span>
<span class="sd">            Study BRAIN^RESEARCH [19040323]</span>
<span class="sd">                Series 015 [sag 3d gre +c]</span>
<span class="sd">                    Nr of instances: 176</span>
<span class="sd">        ----------------------------------</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">path</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">mgr</span> <span class="o">=</span> <span class="n">Manager</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">mgr</span> <span class="o">=</span> <span class="n">Manager</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">mgr</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">Database</span><span class="p">(</span><span class="n">create</span><span class="p">,</span> <span class="n">mgr</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> </div>


<div class="viewcode-block" id="patient"><a class="viewcode-back" href="../../reference/generated/dbdicom.patient.html#dbdicom.patient">[docs]</a><span class="k">def</span> <span class="nf">patient</span><span class="p">(</span><span class="n">in_database</span><span class="p">:</span><span class="n">Database</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">Patient</span><span class="p">:</span> 
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create an empty DICOM patient record.</span>

<span class="sd">    Args:</span>
<span class="sd">        in_database (Database, optional): If provided, the patient is created in this database. Defaults to None.</span>
<span class="sd">        kwargs: Any valid DICOM (tag, value) pair to set properties of the new patient</span>

<span class="sd">    Returns:</span>
<span class="sd">        Study: DICOM patient with defaults for all attributes.</span>

<span class="sd">    See Also:</span>
<span class="sd">        :func:`~database`</span>
<span class="sd">        :func:`~study`</span>
<span class="sd">        :func:`~series`</span>

<span class="sd">    Example:</span>
<span class="sd">        Create an empty patient in memory:</span>

<span class="sd">        &gt;&gt;&gt; patient = db.patient()</span>
<span class="sd">        &gt;&gt;&gt; patient.print()</span>
<span class="sd">        ---------- PATIENT -------------</span>
<span class="sd">        Patient New Patient</span>
<span class="sd">        --------------------------------</span>

<span class="sd">        Note since no patient object is provided, a default database is created automatically.</span>

<span class="sd">        &gt;&gt;&gt; patient.database().print()</span>
<span class="sd">        ---------- DATABASE --------------</span>
<span class="sd">        Location:  In memory</span>
<span class="sd">            Patient New Patient</span>
<span class="sd">        ----------------------------------</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">in_database</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">db</span> <span class="o">=</span> <span class="n">database</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">db</span> <span class="o">=</span> <span class="n">in_database</span>
    <span class="n">patient</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">new_patient</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">in_database</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">db</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">patient</span></div>


<div class="viewcode-block" id="study"><a class="viewcode-back" href="../../reference/generated/dbdicom.study.html#dbdicom.study">[docs]</a><span class="k">def</span> <span class="nf">study</span><span class="p">(</span><span class="n">in_patient</span><span class="p">:</span><span class="n">Patient</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">in_database</span><span class="p">:</span><span class="n">Database</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">Study</span><span class="p">:</span> 
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create an empty DICOM study record.</span>

<span class="sd">    Args:</span>
<span class="sd">        in_patient (Patient, optional): If provided, the study is created in this Patient. Defaults to None.</span>
<span class="sd">        in_database (Database, optional): If provided, the study is created in this database. Defaults to None.</span>
<span class="sd">        kwargs: Any valid DICOM (tag, value) pair to set properties of the new study</span>

<span class="sd">    Returns:</span>
<span class="sd">        Study: DICOM study with defaults for all attributes.</span>

<span class="sd">    See Also:</span>
<span class="sd">        :func:`~database`</span>
<span class="sd">        :func:`~patient`</span>
<span class="sd">        :func:`~series`</span>

<span class="sd">    Example:</span>
<span class="sd">        Create an empty study in memory:</span>

<span class="sd">        &gt;&gt;&gt; study = db.study()</span>
<span class="sd">        &gt;&gt;&gt; study.print()</span>
<span class="sd">        ---------- STUDY ---------------</span>
<span class="sd">        Study New Study [None]</span>
<span class="sd">        --------------------------------</span>

<span class="sd">        Note since no patient object is provided, a default hierarchy is created automatically:</span>

<span class="sd">        &gt;&gt;&gt; study.database().print()</span>
<span class="sd">        ---------- DATABASE --------------</span>
<span class="sd">        Location:  In memory</span>
<span class="sd">            Patient New Patient</span>
<span class="sd">                Study New Study [None]</span>
<span class="sd">        ----------------------------------</span>
<span class="sd">    &quot;&quot;&quot;</span>
    
    <span class="k">if</span> <span class="n">in_patient</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">study</span> <span class="o">=</span> <span class="n">in_patient</span><span class="o">.</span><span class="n">new_study</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">in_database</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">db</span> <span class="o">=</span> <span class="n">database</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">db</span> <span class="o">=</span> <span class="n">in_database</span>
        <span class="n">patient</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">new_patient</span><span class="p">()</span>
        <span class="n">study</span> <span class="o">=</span> <span class="n">patient</span><span class="o">.</span><span class="n">new_study</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">in_database</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">db</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">study</span></div>


<div class="viewcode-block" id="series"><a class="viewcode-back" href="../../reference/generated/dbdicom.series.html#dbdicom.series">[docs]</a><span class="k">def</span> <span class="nf">series</span><span class="p">(</span><span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;mri&#39;</span><span class="p">,</span> <span class="n">in_study</span><span class="p">:</span><span class="n">Study</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">in_database</span><span class="p">:</span><span class="n">Database</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">Series</span><span class="p">:</span> 
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create an empty DICOM series.</span>

<span class="sd">    Args:</span>
<span class="sd">        dtype (str, optional): The type of the series to create. Defaults to &#39;mri&#39;.</span>
<span class="sd">        in_study (Study, optional): If provided, the series is created in this study. Defaults to None.</span>
<span class="sd">        in_database (Database, optional): If provided, the series is created in this database. Defaults to None.</span>
<span class="sd">        kwargs: Any valid DICOM (tag, value) pair to set properties of the new patient</span>

<span class="sd">    Returns:</span>
<span class="sd">        Series: DICOM series with defaults for all attributes.</span>
<span class="sd"> </span>
<span class="sd">    Raises:</span>
<span class="sd">        ValueError: if a dtype is requested that is currently not yet implemented</span>

<span class="sd">    See Also:</span>
<span class="sd">        :func:`~database`</span>
<span class="sd">        :func:`~patient`</span>
<span class="sd">        :func:`~study`</span>
<span class="sd">        :func:`~as_series`</span>
<span class="sd">        :func:`~zeros`</span>

<span class="sd">    Example:</span>
<span class="sd">        Create an empty series in memory. </span>

<span class="sd">        &gt;&gt;&gt; series = db.series()</span>
<span class="sd">        &gt;&gt;&gt; series.print()</span>
<span class="sd">        ---------- SERIES --------------</span>
<span class="sd">        Series 001 [New Series]</span>
<span class="sd">            Nr of instances: 0</span>
<span class="sd">        --------------------------------</span>

<span class="sd">        Note since no patient and study records are provided, a default hierarchy is created automatically:</span>

<span class="sd">        &gt;&gt;&gt; series.database().print()</span>
<span class="sd">        ---------- DATABASE --------------</span>
<span class="sd">        Location:  In memory</span>
<span class="sd">        Patient New Patient</span>
<span class="sd">            Study New Study [None]</span>
<span class="sd">                Series 001 [New Series]</span>
<span class="sd">                    Nr of instances: 0</span>
<span class="sd">        ----------------------------------</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">dtype</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;mri&#39;</span><span class="p">,</span> <span class="s1">&#39;MRImage&#39;</span><span class="p">]:</span>
        <span class="n">message</span> <span class="o">=</span> <span class="s1">&#39;dbdicom can only create images of type MRImage at this stage&#39;</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
    
    <span class="k">if</span> <span class="n">in_study</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">series</span> <span class="o">=</span> <span class="n">in_study</span><span class="o">.</span><span class="n">new_series</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">in_database</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">_database</span> <span class="o">=</span> <span class="n">database</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">_database</span> <span class="o">=</span> <span class="n">in_database</span>
        <span class="n">patient</span> <span class="o">=</span> <span class="n">_database</span><span class="o">.</span><span class="n">new_patient</span><span class="p">()</span>
        <span class="n">study</span> <span class="o">=</span> <span class="n">patient</span><span class="o">.</span><span class="n">new_study</span><span class="p">()</span>
        <span class="n">series</span> <span class="o">=</span> <span class="n">study</span><span class="o">.</span><span class="n">new_series</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">in_database</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">_database</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">series</span></div>



<div class="viewcode-block" id="database_hollywood"><a class="viewcode-back" href="../../reference/generated/dbdicom.database_hollywood.html#dbdicom.database_hollywood">[docs]</a><span class="k">def</span> <span class="nf">database_hollywood</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">Database</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create an empty toy database for demonstration purposes.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Database: Database with two patients, two studies per patient and two empty series per study.</span>

<span class="sd">    See Also:</span>
<span class="sd">        :func:`~database`</span>

<span class="sd">    Example:</span>
<span class="sd">        &gt;&gt;&gt; database = db.database_hollywood()</span>
<span class="sd">        &gt;&gt;&gt; database.print()</span>
<span class="sd">        ---------- DATABASE --------------</span>
<span class="sd">        Location:  In memory</span>
<span class="sd">            Patient James Bond</span>
<span class="sd">                Study MRI [19821201]</span>
<span class="sd">                    Series 001 [Localizer]</span>
<span class="sd">                        Nr of instances: 0</span>
<span class="sd">                    Series 002 [T2w]</span>
<span class="sd">                        Nr of instances: 0</span>
<span class="sd">                Study Xray [19821205]</span>
<span class="sd">                    Series 001 [Chest]</span>
<span class="sd">                        Nr of instances: 0</span>
<span class="sd">                    Series 002 [Head]</span>
<span class="sd">                        Nr of instances: 0</span>
<span class="sd">            Patient Scarface</span>
<span class="sd">                Study MRI [19850105]</span>
<span class="sd">                    Series 001 [Localizer]</span>
<span class="sd">                        Nr of instances: 0</span>
<span class="sd">                    Series 002 [T2w]</span>
<span class="sd">                        Nr of instances: 0</span>
<span class="sd">                Study Xray [19850106]</span>
<span class="sd">                    Series 001 [Chest]</span>
<span class="sd">                        Nr of instances: 0</span>
<span class="sd">                    Series 002 [Head]</span>
<span class="sd">                        Nr of instances: 0</span>
<span class="sd">        ---------------------------------</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">hollywood</span> <span class="o">=</span> <span class="n">database</span><span class="p">()</span>

    <span class="n">james_bond</span> <span class="o">=</span> <span class="n">hollywood</span><span class="o">.</span><span class="n">new_patient</span><span class="p">(</span><span class="n">PatientName</span><span class="o">=</span><span class="s1">&#39;James Bond&#39;</span><span class="p">)</span>
    <span class="n">james_bond_mri</span> <span class="o">=</span> <span class="n">james_bond</span><span class="o">.</span><span class="n">new_study</span><span class="p">(</span><span class="n">StudyDescription</span><span class="o">=</span><span class="s1">&#39;MRI&#39;</span><span class="p">,</span> <span class="n">StudyDate</span><span class="o">=</span><span class="s1">&#39;19821201&#39;</span><span class="p">)</span>
    <span class="n">james_bond_mri_localizer</span> <span class="o">=</span> <span class="n">james_bond_mri</span><span class="o">.</span><span class="n">new_series</span><span class="p">(</span><span class="n">SeriesDescription</span><span class="o">=</span><span class="s1">&#39;Localizer&#39;</span><span class="p">)</span>
    <span class="n">james_bond_mri_T2w</span> <span class="o">=</span> <span class="n">james_bond_mri</span><span class="o">.</span><span class="n">new_series</span><span class="p">(</span><span class="n">SeriesDescription</span><span class="o">=</span><span class="s1">&#39;T2w&#39;</span><span class="p">)</span>
    <span class="n">james_bond_xray</span> <span class="o">=</span> <span class="n">james_bond</span><span class="o">.</span><span class="n">new_study</span><span class="p">(</span><span class="n">StudyDescription</span><span class="o">=</span><span class="s1">&#39;Xray&#39;</span><span class="p">,</span> <span class="n">StudyDate</span><span class="o">=</span><span class="s1">&#39;19821205&#39;</span><span class="p">)</span>
    <span class="n">james_bond_xray_chest</span> <span class="o">=</span> <span class="n">james_bond_xray</span><span class="o">.</span><span class="n">new_series</span><span class="p">(</span><span class="n">SeriesDescription</span><span class="o">=</span><span class="s1">&#39;Chest&#39;</span><span class="p">)</span>
    <span class="n">james_bond_xray_head</span> <span class="o">=</span> <span class="n">james_bond_xray</span><span class="o">.</span><span class="n">new_series</span><span class="p">(</span><span class="n">SeriesDescription</span><span class="o">=</span><span class="s1">&#39;Head&#39;</span><span class="p">)</span>

    <span class="n">scarface</span> <span class="o">=</span> <span class="n">hollywood</span><span class="o">.</span><span class="n">new_patient</span><span class="p">(</span><span class="n">PatientName</span><span class="o">=</span><span class="s1">&#39;Scarface&#39;</span><span class="p">)</span>
    <span class="n">scarface_mri</span> <span class="o">=</span> <span class="n">scarface</span><span class="o">.</span><span class="n">new_study</span><span class="p">(</span><span class="n">StudyDescription</span><span class="o">=</span><span class="s1">&#39;MRI&#39;</span><span class="p">,</span> <span class="n">StudyDate</span><span class="o">=</span><span class="s1">&#39;19850105&#39;</span><span class="p">)</span>
    <span class="n">scarface_mri_localizer</span> <span class="o">=</span> <span class="n">scarface_mri</span><span class="o">.</span><span class="n">new_series</span><span class="p">(</span><span class="n">SeriesDescription</span><span class="o">=</span><span class="s1">&#39;Localizer&#39;</span><span class="p">)</span>
    <span class="n">scarface_mri_T2w</span> <span class="o">=</span> <span class="n">scarface_mri</span><span class="o">.</span><span class="n">new_series</span><span class="p">(</span><span class="n">SeriesDescription</span><span class="o">=</span><span class="s1">&#39;T2w&#39;</span><span class="p">)</span>
    <span class="n">scarface_xray</span> <span class="o">=</span> <span class="n">scarface</span><span class="o">.</span><span class="n">new_study</span><span class="p">(</span><span class="n">StudyDescription</span><span class="o">=</span><span class="s1">&#39;Xray&#39;</span><span class="p">,</span> <span class="n">StudyDate</span><span class="o">=</span><span class="s1">&#39;19850106&#39;</span><span class="p">)</span>
    <span class="n">scarface_xray_chest</span> <span class="o">=</span> <span class="n">scarface_xray</span><span class="o">.</span><span class="n">new_series</span><span class="p">(</span><span class="n">SeriesDescription</span><span class="o">=</span><span class="s1">&#39;Chest&#39;</span><span class="p">)</span>
    <span class="n">scarface_xray_head</span> <span class="o">=</span> <span class="n">scarface_xray</span><span class="o">.</span><span class="n">new_series</span><span class="p">(</span><span class="n">SeriesDescription</span><span class="o">=</span><span class="s1">&#39;Head&#39;</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">hollywood</span></div>




<div class="viewcode-block" id="as_series"><a class="viewcode-back" href="../../reference/generated/dbdicom.as_series.html#dbdicom.as_series">[docs]</a><span class="k">def</span> <span class="nf">as_series</span><span class="p">(</span><span class="n">array</span><span class="p">:</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">coords</span><span class="p">:</span><span class="nb">dict</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;mri&#39;</span><span class="p">,</span> <span class="n">in_study</span><span class="p">:</span><span class="n">Study</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">in_database</span><span class="p">:</span><span class="n">Database</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">Series</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create a DICOM series from a numpy array.</span>

<span class="sd">    Args:</span>
<span class="sd">        array (np.ndarray): numpy.ndarray with image data</span>
<span class="sd">        coords (dict, optional): Dictionary with coordinate labels and values. For 3- or 4-dimensional arrays this is optional but for arrays with more than 4 dimensions this is required. The coordinate values can be one-dimensions for regularly gridded data, or n-dimensional for irregularly gridded data. </span>
<span class="sd">        dtype (str, optional): The type of the series to create. Defaults to &#39;mri&#39;.</span>
<span class="sd">        in_study (Study, optional): If provided, the series is created in this study. Defaults to None.</span>
<span class="sd">        in_database (Database, optional): If provided, the series is created in this database. Defaults to None.</span>
<span class="sd">        kwargs: Any valid DICOM (tag, value) pair to set properties of the new patient</span>

<span class="sd">    Returns:</span>
<span class="sd">        Series: DICOM series containing the provided array as image data and defaults for all other parameters.</span>
<span class="sd"> </span>
<span class="sd">    Raises:</span>
<span class="sd">        ValueError: if a dtype is requested that is currently not yet implemented</span>
<span class="sd">        ValueError: If the coords do not match up with the shape of the array.</span>

<span class="sd">    See Also:</span>
<span class="sd">        :func:`~series`</span>
<span class="sd">        :func:`~zeros`</span>

<span class="sd">    Example:</span>
<span class="sd">        Create a series containing a 4-dimensional array. Since the default format is single-frame MRImage, this produces 6 separate files.</span>

<span class="sd">        &gt;&gt;&gt; array = np.zeros((128, 128, 3, 2))</span>
<span class="sd">        &gt;&gt;&gt; zeros = db.as_series(array)</span>
<span class="sd">        &gt;&gt;&gt; zeros.print()</span>
<span class="sd">        ---------- SERIES --------------</span>
<span class="sd">        Series 001 [New Series]</span>
<span class="sd">            Nr of instances: 6 </span>
<span class="sd">                MRImage 000001   </span>
<span class="sd">                MRImage 000002   </span>
<span class="sd">                MRImage 000003</span>
<span class="sd">                MRImage 000004</span>
<span class="sd">                MRImage 000005</span>
<span class="sd">                MRImage 000006</span>
<span class="sd">        --------------------------------</span>

<span class="sd">        Since no coordinates are provided, these are assumed to be SliceLocation and AcquisitionTime with default values:</span>

<span class="sd">        &gt;&gt;&gt; print(zeros.SliceLocation)</span>
<span class="sd">        [0.0, 1.0, 2.0]</span>
<span class="sd">        &gt;&gt;&gt; print(zeros.AcquisitionTime)</span>
<span class="sd">        [0.0, 1.0]</span>

<span class="sd">        To override these defaults, set coordinates explicitly using a dictionary. For instance, for an MRI series of images acquired at a single slice location for 3 flip angles and 2 repetition times, the coordinates of the series are:</span>

<span class="sd">        &gt;&gt;&gt; coords = {</span>
<span class="sd">        ...    &#39;FlipAngle&#39;: [2, 15, 30],</span>
<span class="sd">        ...    &#39;RepetitionTime&#39;: [2.5, 5.0],</span>
<span class="sd">        ... }</span>

<span class="sd">        Now create another series, providing coordinates, and list the unique values of flip angle and repetition time:</span>
<span class="sd">        &gt;&gt;&gt; zeros = db.as_series(array, coords)</span>
<span class="sd">        &gt;&gt;&gt; print(zeros.FlipAngle)</span>
<span class="sd">        [2.0, 15.0, 30.0]</span>
<span class="sd">        &gt;&gt;&gt; print(zeros.RepetitionTime)</span>
<span class="sd">        [2.5, 5.0]</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">shape</span> <span class="o">=</span> <span class="n">array</span><span class="o">.</span><span class="n">shape</span>
    <span class="k">if</span> <span class="n">coords</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">shape</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">4</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;With more than 4 dimensions, the coordinates argument is required&#39;</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">coords</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">shape</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">:</span>
                <span class="n">coords</span><span class="p">[</span><span class="s1">&#39;SliceLocation&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">array</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">shape</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">3</span><span class="p">:</span>
                <span class="n">coords</span><span class="p">[</span><span class="s1">&#39;AcquisitionTime&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">array</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span>
    <span class="n">sery</span> <span class="o">=</span> <span class="n">series</span><span class="p">(</span><span class="n">dtype</span><span class="o">=</span><span class="n">dtype</span><span class="p">,</span> <span class="n">in_study</span><span class="o">=</span><span class="n">in_study</span><span class="p">,</span> <span class="n">in_database</span><span class="o">=</span><span class="n">in_database</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="n">sery</span><span class="o">.</span><span class="n">mute</span><span class="p">()</span>
    <span class="n">sery</span><span class="o">.</span><span class="n">set_ndarray</span><span class="p">(</span><span class="n">array</span><span class="p">,</span> <span class="n">coords</span><span class="o">=</span><span class="n">coords</span><span class="p">)</span>
    <span class="n">sery</span><span class="o">.</span><span class="n">unmute</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">sery</span></div>


<div class="viewcode-block" id="zeros"><a class="viewcode-back" href="../../reference/generated/dbdicom.zeros.html#dbdicom.zeros">[docs]</a><span class="k">def</span> <span class="nf">zeros</span><span class="p">(</span><span class="n">shape</span><span class="p">:</span><span class="nb">tuple</span><span class="p">,</span> <span class="n">coords</span><span class="p">:</span><span class="nb">dict</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Series</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create a DICOM series populated with zeros.</span>

<span class="sd">    This is a convenience wrapper providing a numpy-like interface for :func:`~as_series`.</span>

<span class="sd">    Args:</span>
<span class="sd">        shape (tuple): shape of the array</span>
<span class="sd">        kwargs: see :func:`~series`</span>
<span class="sd">        </span>
<span class="sd">    Returns:</span>
<span class="sd">        Series: DICOM series with zero values</span>

<span class="sd">    See Also:</span>
<span class="sd">        :func:`~ones`</span>

<span class="sd">    Example:</span>
<span class="sd">        Create a series containing a 4-dimensional array of zeros:</span>

<span class="sd">        &gt;&gt;&gt; zeros = db.zeros((128, 128, 2, 3))</span>
<span class="sd">        &gt;&gt;&gt; zeros.print()</span>
<span class="sd">        ---------- SERIES --------------</span>
<span class="sd">        Series 001 [New Series]</span>
<span class="sd">            Nr of instances: 6</span>
<span class="sd">                MRImage 000001</span>
<span class="sd">                MRImage 000002</span>
<span class="sd">                MRImage 000003</span>
<span class="sd">                MRImage 000004</span>
<span class="sd">                MRImage 000005</span>
<span class="sd">                MRImage 000006</span>
<span class="sd">        --------------------------------</span>

<span class="sd">        This is effectively shorthand for:</span>
<span class="sd">        </span>
<span class="sd">        &gt;&gt;&gt; array = np.zeros((128, 128, 2, 3))</span>
<span class="sd">        &gt;&gt;&gt; zeros = db.as_series(array)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">coords</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">shape</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">4</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;With more than 4 dimensions, the coordinates argument is required&#39;</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">coords</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">shape</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">:</span>
                <span class="n">coords</span><span class="p">[</span><span class="s1">&#39;SliceLocation&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">shape</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">shape</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">3</span><span class="p">:</span>
                <span class="n">coords</span><span class="p">[</span><span class="s1">&#39;AcquisitionTime&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">shape</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span>
    <span class="n">array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">shape</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">as_series</span><span class="p">(</span><span class="n">array</span><span class="p">,</span> <span class="n">coords</span><span class="o">=</span><span class="n">coords</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div>


<div class="viewcode-block" id="ones"><a class="viewcode-back" href="../../reference/generated/dbdicom.ones.html#dbdicom.ones">[docs]</a><span class="k">def</span> <span class="nf">ones</span><span class="p">(</span><span class="n">shape</span><span class="p">:</span><span class="nb">tuple</span><span class="p">,</span> <span class="n">coords</span><span class="p">:</span><span class="nb">dict</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Series</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create a DICOM series populated with ones.</span>

<span class="sd">    This is a convenience wrapper providing a numpy-like interface for :func:`~as_series`.</span>

<span class="sd">    Args:</span>
<span class="sd">        shape (tuple): shape of the array</span>
<span class="sd">        kwargs: see :func:`~series`</span>
<span class="sd">        </span>
<span class="sd">    Returns:</span>
<span class="sd">        Series: DICOM series with values of one.</span>

<span class="sd">    See Also:</span>
<span class="sd">        :func:`~zeros`</span>

<span class="sd">    Example:</span>
<span class="sd">        Create a series containing a 4-dimensional array of ones:</span>

<span class="sd">        &gt;&gt;&gt; zeros = db.ones((128, 128, 2, 3))</span>
<span class="sd">        &gt;&gt;&gt; zeros.print()</span>
<span class="sd">        ---------- SERIES --------------</span>
<span class="sd">        Series 001 [New Series]</span>
<span class="sd">            Nr of instances: 6</span>
<span class="sd">                MRImage 000001</span>
<span class="sd">                MRImage 000002</span>
<span class="sd">                MRImage 000003</span>
<span class="sd">                MRImage 000004</span>
<span class="sd">                MRImage 000005</span>
<span class="sd">                MRImage 000006</span>
<span class="sd">        --------------------------------</span>

<span class="sd">        This is effectively shorthand for:</span>
<span class="sd">        </span>
<span class="sd">        &gt;&gt;&gt; array = np.ones((128, 128, 2, 3))</span>
<span class="sd">        &gt;&gt;&gt; zeros = db.as_series(array)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">coords</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">shape</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">4</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;With more than 4 dimensions, the coordinates argument is required&#39;</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">coords</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">shape</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">:</span>
                <span class="n">coords</span><span class="p">[</span><span class="s1">&#39;SliceLocation&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">shape</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">shape</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">3</span><span class="p">:</span>
                <span class="n">coords</span><span class="p">[</span><span class="s1">&#39;AcquisitionTime&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">shape</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span>
    <span class="n">array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="n">shape</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">as_series</span><span class="p">(</span><span class="n">array</span><span class="p">,</span> <span class="n">coords</span><span class="o">=</span><span class="n">coords</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div>
</pre></div>

                </article>
              
              
              
                <footer class="bd-footer-article">
                  
<div class="footer-article-items footer-article__inner">
  
    <div class="footer-article-item"><!-- Previous / next buttons -->
<div class="prev-next-area">
</div></div>
  
</div>

                </footer>
              
            </div>
            
            
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../_static/scripts/bootstrap.js?digest=e353d410970836974a52"></script>
<script src="../../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">
  <p class="copyright">
    
       Copyright 2022, QIB-Sheffield.
      <br/>
    
  </p>
</div>
      
        <div class="footer-item">
  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 6.2.1.
    <br/>
  </p>
</div>
      
    </div>
  
  
    <div class="footer-items__end">
      
        <div class="footer-item"><p class="theme-version">
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.13.3.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>