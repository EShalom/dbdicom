

<!DOCTYPE html>


<html lang="en" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>Reading and opening a DICOM database &#8212; dbdicom 1.0 documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../../_static/styles/bootstrap.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=e353d410970836974a52" rel="stylesheet" />

  
  <link href="../../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=e353d410970836974a52" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/bootstrap.js?digest=e353d410970836974a52" />
<link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52" />

    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/sphinx_highlight.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script src="../../_static/design-tabs.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'user_guide/browse/browse';</script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Creating and modifying DICOM files" href="../create/index.html" />
    <link rel="prev" title="Browsing a DICOM folder" href="index.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
<div class="bd-header__inner bd-page-width">
  <label class="sidebar-toggle primary-toggle" for="__primary">
    <span class="fa-solid fa-bars"></span>
  </label>
  
  <div class="navbar-header-items__start">
    
      <div class="navbar-item">
  

<a class="navbar-brand logo" href="../../index.html">
  
  
  
  
    
    
      
    
    
    <img src="../../_static/dbd.png" class="logo__image only-light" alt="Logo image"/>
    <script>document.write(`<img src="../../_static/dbd.png" class="logo__image only-dark" alt="Logo image"/>`);</script>
  
  
</a></div>
    
  </div>
  
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item"><nav class="navbar-nav">
  <p class="sidebar-header-items__title"
     role="heading"
     aria-level="1"
     aria-label="Site Navigation">
    Site Navigation
  </p>
  <ul class="bd-navbar-elements navbar-nav">
    
                    <li class="nav-item current active">
                      <a class="nav-link nav-internal" href="../index.html">
                        User guide
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../reference/index.html">
                        Reference
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../tutorials/index.html">
                        Tutorials
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../developers_guide/index.html">
                        Developer guide
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../about/index.html">
                        About
                      </a>
                    </li>
                
  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          
<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
        </div>
      
      
        <div class="navbar-item">
<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links navbar-nav"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/QIB-Sheffield/dbdicom" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-square-github"></i></span>
            <label class="sr-only">GitHub</label></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">
<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
    </div>
  

  
    <label class="sidebar-toggle secondary-toggle" for="__secondary">
      <span class="fa-solid fa-outdent"></span>
    </label>
  
</div>

    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          <div class="navbar-item"><nav class="navbar-nav">
  <p class="sidebar-header-items__title"
     role="heading"
     aria-level="1"
     aria-label="Site Navigation">
    Site Navigation
  </p>
  <ul class="bd-navbar-elements navbar-nav">
    
                    <li class="nav-item current active">
                      <a class="nav-link nav-internal" href="../index.html">
                        User guide
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../reference/index.html">
                        Reference
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../tutorials/index.html">
                        Tutorials
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../developers_guide/index.html">
                        Developer guide
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../about/index.html">
                        About
                      </a>
                    </li>
                
  </ul>
</nav></div>
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">
<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links navbar-nav"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/QIB-Sheffield/dbdicom" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-square-github"></i></span>
            <label class="sr-only">GitHub</label></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item"><nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"><p aria-level="2" class="caption" role="heading"><span class="caption-text">Basic usage</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1 current active has-children"><a class="reference internal" href="index.html">Browsing a DICOM folder</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-1"><i class="fa-solid fa-chevron-down"></i></label><ul class="current">
<li class="toctree-l2 current active"><a class="current reference internal" href="#">Reading and opening a DICOM database</a></li>





</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../create/index.html">Creating and modifying DICOM files</a></li>
<li class="toctree-l1"><a class="reference internal" href="../interactions/index.html">User interactions</a></li>
</ul>
</div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">



<nav aria-label="Breadcrumbs">
  <ul class="bd-breadcrumbs" role="navigation" aria-label="Breadcrumb">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="../index.html" class="nav-link">User guide</a></li>
    
    
    <li class="breadcrumb-item"><a href="index.html" class="nav-link">Browsing a DICOM folder</a></li>
    
    <li class="breadcrumb-item active" aria-current="page">Reading and opening a DICOM database</li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section id="reading-and-opening-a-dicom-database">
<h1>Reading and opening a DICOM database<a class="headerlink" href="#reading-and-opening-a-dicom-database" title="Permalink to this heading">#</a></h1>
<p>Open a DICOM database in a given folder, and print a summary of the content:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">dbdicom</span> <span class="k">as</span> <span class="nn">db</span>

<span class="n">database</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">database</span><span class="p">(</span><span class="s1">&#39;C:</span><span class="se">\\</span><span class="s1">Users</span><span class="se">\\</span><span class="s1">MyName</span><span class="se">\\</span><span class="s1">MyData</span><span class="se">\\</span><span class="s1">DICOMtestData&#39;</span><span class="p">)</span>
<span class="n">database</span><span class="o">.</span><span class="n">print</span><span class="p">()</span>
</pre></div>
</div>
<p>The first time the database is opened this will be relatively slow because all files need to be read and summarized. If the folder is reopened again later, the table can be read directly and opening will be much faster.</p>
<p>Use <code class="docutils literal notranslate"><span class="pre">scan()</span></code> to force a rereading of the database. This may be of use when files have become corrupted, or have been removed/modified by external applications:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">database</span><span class="o">.</span><span class="n">scan</span><span class="p">()</span>
</pre></div>
</div>
<p>After making changes to the DICOM data, the folder should be closed
properly so any changes can be either saved or rolled back as needed:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">database</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
<p>If unsaved changes exist, <code class="docutils literal notranslate"><span class="pre">close()</span></code> will prompt the user to either save or restore to the last saved state.</p>
</section>
<section id="retrieving-objects-from-the-folder">
<h1>Retrieving objects from the folder<a class="headerlink" href="#retrieving-objects-from-the-folder" title="Permalink to this heading">#</a></h1>
<p>A DICOM database has a hierarchical structure.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>database
├── Patient 1
│   ├── Study 1
│   │   ├── Series 1
│   │   ├── ...
│   │   └── Series n
│   │── Study 2
│   ├── ...
│   └── Study n
├── Patient 2
├── ...
└── Patient n
</pre></div>
</div>
<p>A <em>patient</em> can be an actual patient but can also be a healthy volunteer, an animal, a physical reference object, or a digital reference object. Typically a <em>study</em> consist of all the data derived in a single examination of a subject. A <em>series</em> usually represents and individual examination in a study, such an MR sequence. The files contain the data and are <em>instances</em> of real-world objects such as images or regions-of-interest.</p>
<p>To return a list of all patients, studies or series in the folder:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">series</span> <span class="o">=</span> <span class="n">database</span><span class="o">.</span><span class="n">series</span><span class="p">()</span>
<span class="n">studies</span> <span class="o">=</span> <span class="n">database</span><span class="o">.</span><span class="n">studies</span><span class="p">()</span>
<span class="n">patients</span> <span class="o">=</span> <span class="n">database</span><span class="o">.</span><span class="n">patients</span><span class="p">()</span>
</pre></div>
</div>
<p>The same functions can be used to retrieve the children of a certain parent object. For instance, to get all studies of a patient:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">studies</span> <span class="o">=</span> <span class="n">patient</span><span class="o">.</span><span class="n">studies</span><span class="p">()</span>
</pre></div>
</div>
<p>Or all series under the first of those studies:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">series</span> <span class="o">=</span> <span class="n">studies</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">series</span><span class="p">()</span>
</pre></div>
</div>
<p>And so on for all other levels in the hierarchy. These functions also work to find objects higher up in the hierarchy. For instance, to find the patient of a given series:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">patient</span> <span class="o">=</span> <span class="n">series</span><span class="o">.</span><span class="n">patients</span><span class="p">()</span>
</pre></div>
</div>
<p>In this case the function will return a single item.</p>
</section>
<section id="finding-dicom-objects-in-the-folder">
<h1>Finding DICOM objects in the folder<a class="headerlink" href="#finding-dicom-objects-in-the-folder" title="Permalink to this heading">#</a></h1>
<p>Each DICOM file has a number of attributes describing the properties of the object. Examples are PatientName, StudyDate, etc. A convenient list of attributes for specific objects can be found <a class="reference external" href="https://dicom.innolitics.com/">here</a>.</p>
<p>Each known attribute is identified most easily by a keyword, which has a capitalised notation. Objects in the folder can be can also be listed by searching on any DICOM tag:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">series</span> <span class="o">=</span> <span class="n">database</span><span class="o">.</span><span class="n">series</span><span class="p">(</span><span class="n">PatientName</span> <span class="o">=</span> <span class="s1">&#39;John Dory&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>This will only return the series for patient John Dory. This also works with multiple DICOM tags:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">series</span> <span class="o">=</span> <span class="n">database</span><span class="o">.</span><span class="n">series</span><span class="p">(</span>
    <span class="n">PatientName</span> <span class="o">=</span> <span class="s1">&#39;John Dory&#39;</span><span class="p">,</span>
    <span class="n">ReferringPhysicianName</span> <span class="o">=</span> <span class="s1">&#39;Dr. No&#39;</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
<p>In this case objects are only returned if both conditions are fullfilled. Any arbitrary number of conditions can be entered, and higher order objects can be found in the same way:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">studies</span> <span class="o">=</span> <span class="n">database</span><span class="o">.</span><span class="n">studies</span><span class="p">(</span>
    <span class="n">PatientName</span> <span class="o">=</span> <span class="s1">&#39;John Dory&#39;</span><span class="p">,</span>
    <span class="n">ReferringPhysicianName</span> <span class="o">=</span> <span class="s1">&#39;Dr. No&#39;</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
<p>As an alternative to calling explicit object types, you can call <code class="docutils literal notranslate"><span class="pre">children()</span></code> and <code class="docutils literal notranslate"><span class="pre">parent</span></code> to move through the hierarchy:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">studies</span> <span class="o">=</span> <span class="n">patient</span><span class="o">.</span><span class="n">children</span><span class="p">()</span>
<span class="n">patient</span> <span class="o">=</span> <span class="n">studies</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">parent</span>
</pre></div>
</div>
<p>The same convenience functions are available, such as searching by keywords:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">studies</span> <span class="o">=</span> <span class="n">patient</span><span class="o">.</span><span class="n">children</span><span class="p">(</span><span class="n">ReferringPhysicianName</span> <span class="o">=</span> <span class="s1">&#39;Dr. No&#39;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="moving-and-removing-objects">
<h1>Moving and removing objects<a class="headerlink" href="#moving-and-removing-objects" title="Permalink to this heading">#</a></h1>
<p>To remove an object from the folder, call <code class="docutils literal notranslate"><span class="pre">remove()</span></code> on the object:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">study</span><span class="o">.</span><span class="n">remove</span><span class="p">()</span>
<span class="n">series</span><span class="o">.</span><span class="n">remove</span><span class="p">()</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">remove()</span></code> can  be called on Patient, Study or Series.</p>
<p>Moving an object to another parent can be done with <code class="docutils literal notranslate"><span class="pre">move_to()</span></code>. For instance to move a study from one patient to another:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">study</span> <span class="o">=</span> <span class="n">folder</span><span class="o">.</span><span class="n">patients</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">studies</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">new_parent</span> <span class="o">=</span> <span class="n">folder</span><span class="o">.</span><span class="n">patients</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span>
<span class="n">study</span><span class="o">.</span><span class="n">move_to</span><span class="p">(</span><span class="n">new_parent</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="copying-and-creating-objects">
<h1>Copying and creating objects<a class="headerlink" href="#copying-and-creating-objects" title="Permalink to this heading">#</a></h1>
<p>Any object can be copied by calling <code class="docutils literal notranslate"><span class="pre">copy()</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">study</span> <span class="o">=</span> <span class="n">folder</span><span class="o">.</span><span class="n">patients</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">studies</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">new_study</span> <span class="o">=</span> <span class="n">study</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</pre></div>
</div>
<p>This will create a copy of the object in the same parent object, i.e. <code class="docutils literal notranslate"><span class="pre">study.copy()</span></code> in the example above has created a new study in patient 0. This can be used for instance to copy-paste a study from one patient to another:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">study</span> <span class="o">=</span> <span class="n">folder</span><span class="o">.</span><span class="n">patients</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">studies</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">new_parent</span> <span class="o">=</span> <span class="n">folder</span><span class="o">.</span><span class="n">patients</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span>
<span class="n">study</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span><span class="o">.</span><span class="n">move_to</span><span class="p">(</span><span class="n">new_parent</span><span class="p">)</span>
</pre></div>
</div>
<p>This is equivalent to using <code class="docutils literal notranslate"><span class="pre">copy_to()</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">study</span><span class="o">.</span><span class="n">copy_to</span><span class="p">(</span><span class="n">new_parent</span><span class="p">)</span>
</pre></div>
</div>
<p>Instead of copying, and object can also be moved:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">study</span><span class="o">.</span><span class="n">move_to</span><span class="p">(</span><span class="n">new_parent</span><span class="p">)</span>
</pre></div>
</div>
<p>To create a new object, call <code class="docutils literal notranslate"><span class="pre">new_child()</span></code> on the parent:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">series</span> <span class="o">=</span> <span class="n">study</span><span class="o">.</span><span class="n">new_child</span><span class="p">()</span>
</pre></div>
</div>
<p><em>series</em> will now be a new (empty) series under <em>study</em>. This can also be written more explicitly for clarity:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">series</span> <span class="o">=</span> <span class="n">study</span><span class="o">.</span><span class="n">new_series</span><span class="p">()</span>
</pre></div>
</div>
<p>And equivalently for <code class="docutils literal notranslate"><span class="pre">new_patient</span></code> and <code class="docutils literal notranslate"><span class="pre">new_study</span></code>. New sibling objects under the same parent can be created by:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">new_series</span> <span class="o">=</span> <span class="n">series</span><span class="o">.</span><span class="n">new_sibling</span><span class="p">()</span>
</pre></div>
</div>
<p>here <code class="docutils literal notranslate"><span class="pre">new_series</span></code> will be a series under the same study as <code class="docutils literal notranslate"><span class="pre">series</span></code>. Objects higher up the hierarchy can be created using <code class="docutils literal notranslate"><span class="pre">new_pibling</span></code> (i.e. sibling of the parent):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">new_study</span> <span class="o">=</span> <span class="n">series</span><span class="o">.</span><span class="n">new_pibling</span><span class="p">()</span>
</pre></div>
</div>
<p>This is shorthand for:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">new_study</span> <span class="o">=</span> <span class="n">series</span><span class="o">.</span><span class="n">parent</span><span class="p">()</span><span class="o">.</span><span class="n">new_sibling</span><span class="p">()</span>
</pre></div>
</div>
<p>When new objects are created, they can be assigned properties up front, for instance:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">new_study</span> <span class="o">=</span> <span class="n">series</span><span class="o">.</span><span class="n">new_pibling</span><span class="p">(</span>
    <span class="n">StudyDescription</span><span class="o">=</span><span class="s1">&#39;Parametric maps&#39;</span><span class="p">,</span>
    <span class="n">StudyDate</span> <span class="o">=</span> <span class="s1">&#39;12.12.22&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>This will ensure that all data that appear under the new study will have these attributes.</p>
</section>
<section id="export-and-import">
<h1>Export and import<a class="headerlink" href="#export-and-import" title="Permalink to this heading">#</a></h1>
<p>To import DICOM files from an external folder, call <code class="docutils literal notranslate"><span class="pre">import_dicom()</span></code> on a database with a list of files:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">database</span><span class="o">.</span><span class="n">import_dicom</span><span class="p">(</span><span class="n">files</span><span class="p">)</span>
</pre></div>
</div>
<p>To export dicom datasets out of the folder to an external folder, call <code class="docutils literal notranslate"><span class="pre">export_as_dicom()</span></code> on any dicom object with the export path as argument:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">series</span><span class="o">.</span><span class="n">export_as_dicom</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
</pre></div>
</div>
<p>Exporting in other formats is similar:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">study</span><span class="o">.</span><span class="n">export_as_csv</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
<span class="n">study</span><span class="o">.</span><span class="n">export_as_nifti</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
<span class="n">study</span><span class="o">.</span><span class="n">export_as_png</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
</pre></div>
</div>
<p>The pixel data from a series can also be exported in numpy format:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">series</span><span class="o">.</span><span class="n">export_as_npy</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
</pre></div>
</div>
<p>This exports the array in dimensions <code class="docutils literal notranslate"><span class="pre">(x,y,n)</span></code> where <code class="docutils literal notranslate"><span class="pre">n</span></code> enumerates the images and <code class="docutils literal notranslate"><span class="pre">x,y</span></code> are the pixels. To export in different dimensions use the <code class="docutils literal notranslate"><span class="pre">sortby</span></code> keyword with one or more DICOM tags:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">series</span><span class="o">.</span><span class="n">export_as_npy</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">sortby</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;SliceLocation&#39;</span><span class="p">,</span><span class="s1">&#39;AcquisitionTime&#39;</span><span class="p">])</span>
</pre></div>
</div>
<p>This exports an array with dimensions <code class="docutils literal notranslate"><span class="pre">(x,y,z,t,n)</span></code> sorted by slice location and acquisition time.</p>
</section>


                </article>
              
              
              
                <footer class="bd-footer-article">
                  
<div class="footer-article-items footer-article__inner">
  
    <div class="footer-article-item"><!-- Previous / next buttons -->
<div class="prev-next-area">
    <a class="left-prev"
       href="index.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Browsing a DICOM folder</p>
      </div>
    </a>
    <a class="right-next"
       href="../create/index.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Creating and modifying DICOM files</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div></div>
  
</div>

                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">Reading and opening a DICOM database</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#retrieving-objects-from-the-folder">Retrieving objects from the folder</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#finding-dicom-objects-in-the-folder">Finding DICOM objects in the folder</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#moving-and-removing-objects">Moving and removing objects</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#copying-and-creating-objects">Copying and creating objects</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#export-and-import">Export and import</a></li>
</ul>

  </nav></div>

  <div class="sidebar-secondary-item">
  <div class="tocsection sourcelink">
    <a href="../../_sources/user_guide/browse/browse.rst.txt">
      <i class="fa-solid fa-file-lines"></i> Show Source
    </a>
  </div>
</div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../_static/scripts/bootstrap.js?digest=e353d410970836974a52"></script>
<script src="../../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">
  <p class="copyright">
    
      © Copyright 2022, QIB-Sheffield.
      <br/>
    
  </p>
</div>
      
        <div class="footer-item">
  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 6.2.1.
    <br/>
  </p>
</div>
      
    </div>
  
  
    <div class="footer-items__end">
      
        <div class="footer-item"><p class="theme-version">
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.13.3.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>